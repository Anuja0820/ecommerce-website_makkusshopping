<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cart — Makkus Shopping</title>

  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"/>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Header (kept same structure as your pages) -->
  <section id="header">
    <a href="#"><img src="img/logo.png" class="logo" alt=""></a>
    <div>
      <u1 id="navbar">
        <li><a href="index.html">Home</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li id="lg-bag"><a class="active" href="cart.html"><i class="far fa-shopping-bag"></i></a></li>
        <a href="#" id="close"><i class="far fa-times"></i></a>
      </u1>
    </div>
    <div id="mobile">
      <a href="cart.html"><i class="far fa-shopping-bag"></i></a>
      <i id="bar" class="fas fa-outdent"></i>
    </div>
  </section>

  <!-- Banner -->
  <section id="page-header">
    <h2>#your_cart</h2>
    <p>Review your items and proceed to checkout</p>
  </section>

  <!-- CART TABLE -->
  <section id="cart" class="section-p1">
    <table width="100%">
      <thead>
        <tr>
          <td>Remove</td>
          <td>Image</td>
          <td>Product</td>
          <td>Price</td>
          <td>Quantity</td>
          <td>Subtotal</td>
        </tr>
      </thead>
      <tbody id="cart-body">
        <!-- rows injected by JS -->
      </tbody>
    </table>
  </section>

  <!-- COUPON + TOTALS -->
  <section id="cart-add" class="section-p1">
    <div id="coupon">
      <h3>Apply Coupon</h3>
      <div class="coupon-row">
        <input id="coupon-input" type="text" placeholder="Enter your coupon" />
        <button class="normal" onclick="applyCoupon()">Apply</button>
      </div>
      <small id="coupon-msg"></small>
    </div>

    <div id="subtotal">
      <h3>Cart Totals</h3>
      <table>
        <tr>
          <td>Cart Subtotal</td>
          <td id="cart-subtotal">$ 0.00</td>
        </tr>
        <tr>
          <td>Discount</td>
          <td id="cart-discount">$ 0.00</td>
        </tr>
        <tr>
          <td>Shipping</td>
          <td id="cart-shipping">Free</td>
        </tr>
        <tr>
          <td><strong>Total</strong></td>
          <td id="cart-total"><strong>$ 0.00</strong></td>
        </tr>
      </table>
      <a href="checkout.html"><button class="normal">Proceed to checkout</button></a>
    </div>
  </section>

  <!-- Newsletter -->
  <section id="newsletter" class="section-p1 section-m1">
    <div class="newstext">
      <h4>Sign Up for Newsletters</h4>
      <p>Get E-mail updates about our latest shop and <span>special offers</span></p>
    </div>
    <div class="form">
      <input type="text" placeholder="your email address" />
      <button class="normal">Sign Up</button>
    </div>
  </section>

  <!-- Footer -->
  <footer class="section-p1">
    <div class="col">
      <img src="img/logo.png" class="logo" alt="">
      <h4>Contact</h4>
      <p><strong>Address:</strong> An der villa bolle , Street 1, Berlin</p>
      <p><strong>Phone:</strong> +0 17630781909 / (+91) 7034153795</p>
      <p><strong>Hours:</strong> 10:00 - 18:00, Mon - Sat</p>
      <div class="follow">
        <h4>Follow us</h4>
        <div class="icon">
          <i class="fab fa-facebook-f"></i>
          <i class="fab fa-twitter"></i>
          <i class="fab fa-instagram"></i>
          <i class="fab fa-pinterest-p"></i>
          <i class="fab fa-youtube"></i>
        </div>
      </div>
    </div>

    <div class="col">
      <h4>About</h4>
      <a href="#">About us</a>
      <a href="#">Delivery Information</a>
      <a href="#">Privacy Policy</a>
      <a href="#">Terms & Conditions</a>
      <a href="#">Contact Us</a>
    </div>

    <div class="col">
      <h4>My Account</h4>
      <a href="#">Sign In</a>
      <a href="#">View Cart</a>
      <a href="#">My Wishlist</a>
      <a href="#">Track My Order</a>
      <a href="#">Help</a>
    </div>

    <div class="col install">
      <h4>Install App</h4>
      <p>From App Store or Google Play</p>
      <div class="row">
        <img src="img/pay/app.jpg" alt="">
        <img src="img/pay/play.jpg" alt="">
      </div>
      <p class="pay-title">Secured Payment Gateways</p>
      <img class="pay-strip" src="img/pay/pay.png" alt="">
    </div>

    <div class="copyright">
      <p>© 2025 Makkus shopping — HTML CSS Ecommerce Template</p>
    </div>
  </footer>

  <!-- CART JS -->
  <script>
    const CART_KEY = "makkus_cart";

    function getCart() {
      return JSON.parse(localStorage.getItem(CART_KEY) || "[]");
    }
    function saveCart(items) {
      localStorage.setItem(CART_KEY, JSON.stringify(items));
    }
    function dollars(cents) {
      return "$ " + (cents / 100).toFixed(2);
    }

    function renderCart() {
      const items = getCart();
      const tbody = document.getElementById("cart-body");

      if (!items.length) {
        tbody.innerHTML = `<tr><td colspan="6" style="text-align:center; padding:30px;">Your cart is empty.</td></tr>`;
      } else {
        tbody.innerHTML = items.map((it, i) => `
          <tr>
            <td class="remove"><button class="link" onclick="removeItem(${i})"><i class="far fa-times-circle"></i></button></td>
            <td><img src="${it.img}" alt="${it.title}"></td>
            <td>${it.title}</td>
            <td>${dollars(it.priceCents)}</td>
            <td><input type="number" min="1" value="${it.qty}" onchange="changeQty(${i}, this.value)" /></td>
            <td>${dollars(it.priceCents * it.qty)}</td>
          </tr>
        `).join("");
      }

      // totals
      const subtotal = items.reduce((s, it) => s + it.priceCents * it.qty, 0);
      const discount = currentDiscount(subtotal);
      const shipping = 0; // free
      const total = subtotal - discount + shipping;

      document.getElementById("cart-subtotal").textContent = dollars(subtotal);
      document.getElementById("cart-discount").textContent = "-" + dollars(discount);
      document.getElementById("cart-total").textContent = dollars(total);
    }

    function removeItem(index) {
      const items = getCart();
      items.splice(index, 1);
      saveCart(items);
      renderCart();
    }

    function changeQty(index, val) {
      const items = getCart();
      items[index].qty = Math.max(1, parseInt(val || "1", 10));
      saveCart(items);
      renderCart();
    }

    // Coupons
    function currentDiscount(subtotal) {
      const code = (localStorage.getItem("coupon") || "").toUpperCase();
      if (code === "WELCOME10") return Math.round(subtotal * 0.10);
      if (code === "FREESHIP") return 0; // example, shipping is already free here
      return 0;
    }
    function applyCoupon() {
      const code = document.getElementById("coupon-input").value.trim().toUpperCase();
      const msg = document.getElementById("coupon-msg");
      if (code === "WELCOME10" || code === "FREESHIP") {
        localStorage.setItem("coupon", code);
        msg.textContent = `Coupon "${code}" applied.`;
        msg.style.color = "#088178";
      } else {
        localStorage.removeItem("coupon");
        msg.textContent = "Invalid coupon.";
        msg.style.color = "#e63946";
      }
      renderCart();
    }

    window.addEventListener("DOMContentLoaded", renderCart);
  </script>
  <script src="script.js"></script>
</body>
</html>
